{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import './css/preloader.css'\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst apiKey = '41917538-242eecdf4d8f318e540737d69';\nconst apiUrl = 'https://pixabay.com/api/';\n\nlet currentPage = 1;\nlet searchTerm = '';\nconst perPage = 40;\nconst searchForm = document.getElementById('search-form');\nconst loadMoreButton = document.getElementById('load-more-button');\nconst preloader = document.getElementById('preloader')\nconst gallery = document.querySelector('.gallery');\n\nsearchForm.addEventListener('submit', async function (event) {\n  event.preventDefault();\n\n  searchTerm = document.querySelector('.input').value.trim();\n\n  if (searchTerm === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term.',\n    });\n    return;\n  }\n\n  clearGallery();\n  try {\n    const data = await searchImages(searchTerm, currentPage);\n    if (data.hits && data.hits.length > 0) {\n      displayImages(data.hits);\n      showLoadMoreButton();\n    } else {\n      showNoImagesMessage();\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    showErrorMessage();\n    hideLoadMoreButton();\n  }\n});\n\nloadMoreButton.addEventListener('click', async function () {\n  try {\n    currentPage += 1;\n    disable(loadMoreButton, preloader);\n    const data = await searchImages(searchTerm, currentPage);\n    if (data.hits && data.hits.length > 0) {\n      displayImages(data.hits, true);\n    } else {\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n    hideLoadMoreButton();\n  } finally {\n    enable(loadMoreButton, preloader);\n  }\n});\n\nfunction getGalleryCardHeight() {\n  const galleryCard = document.querySelector('.image-card');\n  if (galleryCard) {\n    const cardRect = galleryCard.getBoundingClientRect();\n    return cardRect.height;\n  }\n  return 0;\n}\n\nasync function searchImages(query, page) {\n  try {\n    const params = {\n      key: apiKey,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: perPage,\n      page: page,\n    };\n\n    const response = await axios.get(apiUrl, { params });\n\n    if (response.status === 200) {\n      return response.data;\n    } else {\n      throw new Error(response.status);\n    }\n  } catch (error) {\n    throw new Error('Error fetching images:', error);\n  }\n}\n\nasync function displayImages(images, append) {\n  if (!append) {\n    gallery.innerHTML = '';\n  }\n  images.forEach(image => {\n    const card = document.createElement('div');\n    card.className = 'image-card';\n\n    const link = document.createElement('a');\n    link.href = image.webformatURL;\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n    img.className = 'gallery-image';\n\n    const metadata = document.createElement('div');\n    metadata.className = 'image-metadata';\n    metadata.innerHTML = `\n      <p>Likes: ${image.likes}</p>\n      <p>Views: ${image.views}</p>\n      <p>Comments: ${image.comments}</p>\n      <p>Downloads: ${image.downloads}</p>\n    `;\n    card.appendChild(link);\n    link.appendChild(img);\n    card.appendChild(metadata);\n\n    gallery.appendChild(card);\n  });\n\n  const cardHeight = getGalleryCardHeight();\n\n  window.scrollBy({\n    top: 2 * cardHeight,\n    behavior: 'smooth',\n  });\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n\nfunction showNoImagesMessage() {\n  iziToast.error({\n    title: 'Sorry!',\n    message:\n      'There are no images matching your search query. Please try again!',\n  });\n}\n\nfunction showErrorMessage() {\n  iziToast.error({\n    title: 'Error!',\n    message: 'An error occurred while fetching images. Please try again later.',\n  });\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n  currentPage = 1;\n}\n\nfunction showLoadMoreButton() {\n  loadMoreButton.style.display = 'block';\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreButton.style.display = 'none';\n}\n\nfunction disable(loadMoreButton, preloader) {\n  preloader.style.display = 'inline-block';\n  loadMoreButton.disabled = true;\n}\n\nfunction enable(loadMoreButton, preloader) {\n  preloader.style.display = 'none';\n  loadMoreButton.disabled = false;\n}\n"],"names":["apiKey","apiUrl","currentPage","searchTerm","perPage","searchForm","loadMoreButton","preloader","gallery","event","iziToast","clearGallery","data","searchImages","displayImages","showLoadMoreButton","showNoImagesMessage","hideLoadMoreButton","error","showErrorMessage","disable","enable","getGalleryCardHeight","galleryCard","query","page","params","response","axios","images","append","image","card","link","img","metadata","cardHeight","SimpleLightbox"],"mappings":"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"}